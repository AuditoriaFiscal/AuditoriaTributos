<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:include src="template/header.xhtml" />

<body>

	<div id="wrapper">

		<ui:include src="template/nav.xhtml" />

		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">Comparação de NFe</h1>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">Inclusão de NFe</div>
						<div class="panel-body">
							<div class="row">
								<h:form enctype="multipart/form-data">
									<div class="col-lg-12">
										<div class="form-group">
											<p:growl id="messages" showDetail="true" />
											<p:outputLabel value="${nomeArquivoEntrada}" />
											<p:outputLabel value="Arquivo: " />
											
											<p:fileUpload fileUploadListener="#{documentoBean.upload}" 
															  
															  allowTypes="/(\.|\/)(xml)$/"
															  invalidFileMessage="É permitido somente arquivo xml"
															  
															  label="Escolher" 
															  uploadLabel="Upload Notas" 
															  cancelLabel="Cancelar" 
															  
															  sequential="true"
															  dragDropSupport="true"/>
										</div>
									</div>
									<div class="col-lg-12">
										<p:commandButton value="Comparar NCX / Downlaod Excel" ajax="false"
											onclick="PrimeFaces.monitorDownload(start, stop);"
											icon="ui-icon-arrowthick-1-s">
											<p:fileDownload value="#{documentoBean.fileDownload}" />
										</p:commandButton>
									</div>
								</h:form>
							</div>
						</div>


					</div>
				</div>
			</div>
		</div>
	</div>

</body>

<script type="text/javascript">
function start() {
    PF('startButton1').disable();
 
    window['progress'] = setInterval(function() {
        var pbClient = PF('pbClient'),
        oldValue = pbClient.getValue(),
        newValue = oldValue + 10;
 
        pbClient.setValue(pbClient.getValue() + 10);
 
        if(newValue === 100) {
            clearInterval(window['progress']);
        }
 
 
    }, 1000);
}
</script>
</html>