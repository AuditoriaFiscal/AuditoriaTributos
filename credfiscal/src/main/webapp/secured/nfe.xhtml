<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:p="http://primefaces.org/ui"
		xmlns:c="http://java.sun.com/jstl/core">

	<h:head>
	
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="" />
		<meta name="author" content="" />
		<title>CREDFiscal - Comparação de NFe</title>
	
		<link href="../bs/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
		<link href="../bs/vendor/metisMenu/metisMenu.min.css" rel="stylesheet" />
		<link href="../bs/dist/css/sb-admin-2.css" rel="stylesheet" />
		<link href="../bs/vendor/morrisjs/morris.css" rel="stylesheet" />
		<link href="../bs/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		<script name="jquery/jquery.js" library="primefaces"></script>
	</h:head>
	
	<body>

		<div id="wrapper">
			<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="index.html">CREDFiscal - Sistema de cálculo de cédito fiscal</a>
				</div>
	
				<ul class="nav navbar-top-links navbar-right">
					<li class="dropdown"><a class="dropdown-toggle"
						data-toggle="dropdown" href="#"> <i class="fa fa-user fa-fw"></i>
							<i class="fa fa-caret-down"></i>
					</a>
						<ul class="dropdown-menu dropdown-user">
							<li><a href="#"><i class="fa fa-user fa-fw"></i>Perfil do usuário</a></li>
							<li class="divider"></li>
							<li><a href="#"><i class="fa fa-sign-out fa-fw"></i> Sair</a>
							</li>
						</ul></li>
				</ul>
	
				<div class="navbar-default sidebar" role="navigation">
					<div class="sidebar-nav navbar-collapse">
						<ul class="nav" id="side-menu">
							<li><a href="nfe.xhtml?faces-redirect=true"><i
									class="fa fa-edit fa-fw"></i>NFe</a></li>
							<li><a href="#"><i class="fa fa-edit fa-fw"></i>SPED</a></li>
						</ul>
					</div>
					<!-- /.sidebar-collapse -->
				</div>
				<!-- /.navbar-static-side -->
			</nav>
	
			<div id="page-wrapper">
				<div class="row">
					<div class="col-lg-12">
						<h1 class="page-header">Comparação de NFe</h1>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12">
						<div class="panel panel-default">
							<div class="panel-heading">Inclusão de NFe</div>
							<div class="panel-body">
								<h:form enctype="multipart/form-data">
									<div class="row">
										<div class="col-lg-12">
											<p:messages id="messages" autoUpdate="true" closable="true" />
											<div class="form-group">
												<div class="col-lg-2">
													<p:outputLabel value="Nota Entrada: " />
												</div>
												<div class="col-lg-6">
													<p:fileUpload value="#{documentoBean.arquivoEntrada}"
														mode="simple" skinSimple="true" />
												</div>
												<div class="col-lg-4">
													<p:commandButton value="Comparar NCM Entrada" id="comNCMEntrada" actionListener="#{documentoBean.uploadEntrada}" update="messages tabelaDocumentoEntrada" icon="ui-icon-disk" ajax="false" />
												</div>
											</div>
										</div>
										<br/>
										<div class="col-lg-12">
											<div class="form-group">
												<div class="col-lg-2">
													<p:outputLabel value="Nota Saída: " />
												</div>
												<div class="col-lg-6">
													<p:fileUpload value="#{documentoBean.arquivoSaida}" mode="simple" skinSimple="false" />
												</div>
												<div class="col-lg-4">
													<p:commandButton value="Comparar NCM Saída" id="comNCMSaida" actionListener="#{documentoBean.uploadSaida}" update="messages" icon="ui-icon-disk" ajax="false" />
												</div>
											</div>
										</div>
										<div class="col-lg-12">
											<div class="form-group">
												<div class="col-lg-4">
													<p:commandButton value="Comparar NCM's Entrada e Saida" id="comNCMEntradaSaida" actionListener="#{documentoBean.compararNotasEntradaSaida}" update="@form" icon="ui-icon-disk" ajax="false" />
												</div>
											</div>
										</div>
										<div class="col-lg-12" style="height:50px;"></div>
										<div class="col-lg-12">
											<div class="form-group">
												<p:dataTable id="tabelaDocumentoEntrada" var="documento" value="#{documentoBean.documentoEntrada}" rendered="#{not empty documentoBean.documentoEntrada}">
													<f:facet name="header">
														Resultado Documento entrada
													</f:facet> 	
													<p:column headerText="Id">
														<h:outputText value="#{documento.nomeNota}" />
													</p:column>
													<p:column headerText="Item">
														<ui:repeat var="item" value="#{documento.itens}">
															<p:column headerText="NCM">
																<h:outputText value="#{item.idNcm}" />
																<ui:repeat var="itemResult" value="#{item.itensResult}">
																	<h:outputLabel value="#{itemResult.descricao}" />
																</ui:repeat>
															</p:column>
														</ui:repeat>
													</p:column>
												</p:dataTable>
												    <h:commandLink>
												        <p:graphicImage name="/demo/images/excel.png" />
												        <p:dataExporter type="xls" target="tabelaDocumentoEntrada" fileName="Resultado Documento entrada - #{documento.nomeNota}" pageOnly="false"/>
												    </h:commandLink>
											</div>
										</div>
										<div class="col-lg-12">
											<div class="form-group">
												<p:dataTable id="tabelaDocumentoSaida" var="documento" value="#{documentoBean.documentoSaida}"  rendered="#{not empty documentoBean.documentoSaida}">
													<f:facet name="header">
														Resultado Documento saída
													</f:facet>
													<p:column headerText="Id">
														<h:outputText value="#{documento.nomeNota}" />
													</p:column>
													<p:column headerText="Item">
														<ui:repeat var="item" value="#{documento.itens}">
															<p:column headerText="NCM">
																<h:outputText value="#{item.idNcm}" />
																<ui:repeat var="itemResult" value="#{item.itensResult}">
																	<h:outputLabel value="#{itemResult.descricao}" />
																</ui:repeat>
															</p:column>
														</ui:repeat>
													</p:column>
												</p:dataTable>
											</div>
										</div>
										<div class="col-lg-12" style="height:50px;"></div>
										<div class="col-lg-12">
											<div class="form-group">
												<p:dataTable id="tabelaCamparacaoNfs" var="documento" value="#{documentoBean.documentoEntrada}" rendered="#{not empty documentoBean.documentoEntrada}">
													<f:facet name="header">
														Resultado da comparação dos Documento Entrada - Saida
													</f:facet> 	
													<p:column headerText="Id">
														<h:outputText value="#{documento.nomeNota}" />
													</p:column>
													<p:column headerText="Item">
														<ui:repeat var="item" value="#{documento.itens}">
																<ui:repeat var="itemResult" value="#{item.itensResultNotasCompare}">
																<p:column headerText="NCM">
																<h:outputText value="#{item.idNcm}" />
																	<h:outputLabel value="#{itemResult.descricao}" />
																</p:column>
																</ui:repeat>
														</ui:repeat>
													</p:column>
												</p:dataTable>
											</div>
										</div>
									</div>
								</h:form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>